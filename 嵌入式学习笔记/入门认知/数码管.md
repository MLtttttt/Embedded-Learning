
## 基本结构

一个数码管由 8 个 LED 组成，分别命名为 **a、b、c、d、e、f、g、dp**（小数点）

- **共阴极**：所有 LED 的阴极连在一起接地，阳极分别由单片机的 I/O 口控制。给某一段阳极高电平，该段点亮。
- **共阳极**：所有 LED 的阳极连在一起接电源，阴极分别由 I/O 口控制。给某一段阴极低电平，该段点亮。


### 段选与位选

- **段选**：控制数码管哪几个段亮。
- **位选**：当多个数码管组合显示时，需要选择具体点亮哪一个数码管。
- 静态显示中，每个数码管有独立的段选线，没有位选概念
- 动态显示中，所有数码管共用段选线，通过快速切换位选实现视觉上的同时显示


### 数码管编码表（共阴极与共阳极）

对于共阴极数码管，段码 = 对应段点亮的位置为 1。  
常用数字 0~9 的共阴极段码如下
（假设段 a 连接最低位或最高位，需要根据硬件原理图确定，这里假设 **a 对应 D0**）：

| 数字 | 共阴极段码（a~dp 对应 D0~D7） | 二进制（a~dp） | 十六进制 |
|------|-------------------------------|----------------|----------|
| 0    | a,b,c,d,e,f 亮，g,dp 灭       | 0011 1111      | 0x3F     |
| 1    | b,c 亮，其余灭                 | 0000 0110      | 0x06     |
| 2    | a,b,g,e,d 亮                   | 0101 1011      | 0x5B     |
| 3    | a,b,c,d,g 亮                   | 0100 1111      | 0x4F     |
| 4    | f,g,b,c 亮                     | 0110 0110      | 0x66     |
| 5    | a,f,g,c,d 亮                   | 0110 1101      | 0x6D     |
| 6    | a,f,g,e,c,d 亮                 | 0111 1101      | 0x7D     |
| 7    | a,b,c 亮                       | 0000 0111      | 0x07     |
| 8    | 全部点亮                       | 0111 1111      | 0x7F     |
| 9    | a,b,c,d,f,g 亮                 | 0110 1111      | 0x6F     |

**共阳极段码**：只需将共阴极段码按位取反即可。例如数字 0 共阳段码为 ~0x3F = 0xC0（二进制 1100 0000）。
但在实际编程中，常直接定义另一个数组，如 `unsigned char code seg_common_anode[] = {0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8, 0x80, 0x90};`。


###  编写显示单个数字的程序（共阴极）

根据你修正后的代码，逻辑已经正确：

```c
#include "reg51.h"

// 共阴极段码表
unsigned char code seg[] = {0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F};

void delay(void) {
}

// 数码管显示 0~9 循环
void seg_display() {
    unsigned char i;
    for(i = 0; i < 10; i++) {
        P2 = seg[i];    
        delay();  
    }
}

void main() {
    while(1) {
        seg_display();  
    }
}
```

**如何确定类型？**
- 查看原理图：公共端是接地还是接电源。
- 实验：写一个简单程序，让所有段亮。如果 P2=0xFF 时全亮，则为共阴；如果 P2=0x00 时全亮，则为共阳。

### 静态显示与动态显示
- **静态显示**：每个数码管独立占用 8 个 I/O 口，编程简单，但占用 I/O 多。适合数码管数量少的系统。
- **动态显示**：利用人眼视觉暂留，轮流点亮每个数码管。所有数码管的段选并联，位选分别控制。

