C51 COMPILER V9.60.7.0   MAIN                                                              02/12/2026 22:09:03 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"
   2          
   3          sbit key = P1^0;   
   4          sbit LED0 = P2^0;
   5          
   6          bit direction = 0;   // 0: left->right  1: right->left
   7          bit flag = 0;        // 0: stop flow 1: run flow
   8          
   9          void delay(unsigned int n){
  10   1          unsigned int i = 0, j = 0;
  11   1          for(i = 0; i < n; i++) {
  12   2              for(j = 0; j < 120; j++);
  13   2          }
  14   1      }
  15          
  16          void deb(void){
  17   1          delay(20); 
  18   1      }
  19          
  20          void l_to_r(void){
  21   1          unsigned char i;
  22   1          for(i = 0; i < 8; i++){
  23   2              P2 = ~(0x01 << i);  
  24   2              delay(100);
  25   2              
  26   2              if(key == 0){
  27   3                  deb();
  28   3                  if(key == 0){
  29   4                      flag = 0;       
  30   4                      P2 = 0xFF;       
  31   4                      while(key == 0);
  32   4                      deb();
  33   4                      return;       
  34   4                  }
  35   3              }
  36   2          }
  37   1      }
  38          
  39          void r_to_l(void){
  40   1          unsigned char i;
  41   1          for(i = 0; i < 8; i++){
  42   2              P2 = ~(0x80 >> i);   
  43   2              delay(100);
  44   2              
  45   2              if(key == 0){
  46   3                  deb();
  47   3                  if(key == 0){
  48   4                      flag = 0;
  49   4                      P2 = 0xFF;
  50   4                      while(key == 0);
  51   4                      deb();
  52   4                      return;
  53   4                  }
  54   3              }
C51 COMPILER V9.60.7.0   MAIN                                                              02/12/2026 22:09:03 PAGE 2   

  55   2          }
  56   1      }
  57          
  58          void main(){
  59   1          P2 = 0xFF;   
  60   1          
  61   1          while(1){
  62   2           
  63   2              if(key == 0){
  64   3                  deb();
  65   3                  if(key == 0){
  66   4                      if(flag == 0){
  67   5                          flag = 1;
  68   5                          direction = ~direction; 
  69   5                      }
  70   4                      else{
  71   5                          flag = 0;
  72   5                          P2 = 0xFF;
  73   5                      }
  74   4                      while(key == 0);  
  75   4                      deb();
  76   4                  }
  77   3              }
  78   2        
  79   2              if(flag == 1){
  80   3                  if(direction == 0){
  81   4                      l_to_r(); 
  82   4                  }
  83   3                  else{
  84   4                      r_to_l();
  85   4                  }
  86   3              }
  87   2          }
  88   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    176    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
